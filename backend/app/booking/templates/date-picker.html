<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Date Picker with Availability</title>
        <link
            href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
            rel="stylesheet"
        />
        <style>
            .calendar-day {
                width: 3rem;
                height: 3rem;
                line-height: 3rem;
            }

            .available {
                background-color: #6ee7b7;
                color: #ffffff;
            }

            .unavailable {
                background-color: #f87171;
                color: #ffffff;
            }
        </style>
    </head>

    <body class="bg-gray-100 h-screen flex items-center justify-center">
        <div class="p-8 bg-white rounded-lg shadow-md">
            <label
                for="datepicker"
                class="block text-sm font-medium text-gray-700 mb-2"
                >Select a date:</label
            >
            <input
                type="date"
                id="datepicker"
                name="datepicker"
                class="border border-gray-300 rounded-md p-2 focus:outline-none focus:ring focus:ring-blue-500 mb-4"
            />

            <div id="calendar" class="grid grid-cols-7 gap-2">
                <!-- Calendar days will be dynamically generated here -->
            </div>
        </div>

        <script>
            const calendarContainer = document.getElementById("calendar");
            const datepicker = document.getElementById("datepicker");

            function generateCalendar(month, year) {
                calendarContainer.innerHTML = ""; // Clear previous calendar

                const daysInMonth = new Date(year, month + 1, 0).getDate();

                for (let day = 1; day <= daysInMonth; day++) {
                    const date = new Date(year, month, day);
                    const dayOfWeek = date.getDay(); // 0 for Sunday, 1 for Monday, ...

                    const dayElement = document.createElement("div");
                    dayElement.textContent = day;
                    dayElement.classList.add("calendar-day", "text-center");

                    if (dayOfWeek === 0) {
                        dayElement.classList.add("text-red-500"); // Highlight Sundays
                    }

                    // Check availability and style accordingly
                    if (isAvailable(date)) {
                        dayElement.classList.add("available");
                    } else {
                        dayElement.classList.add("unavailable");
                    }

                    calendarContainer.appendChild(dayElement);
                }
            }

            function isAvailable(date) {
                // Sample function to check availability based on the date
                // You can replace this with your own logic
                const availableDates = [
                    "2024-05-15",
                    "2024-05-20",
                    "2024-05-25",
                ];
                const dateString = date.toISOString().slice(0, 10);
                return availableDates.includes(dateString);
            }

            // Initial calendar generation based on selected date
            const currentDate = new Date();
            generateCalendar(currentDate.getMonth(), currentDate.getFullYear());

            // Event listener to regenerate calendar on date change
            datepicker.addEventListener("change", () => {
                const selectedDate = new Date(datepicker.value);
                generateCalendar(
                    selectedDate.getMonth(),
                    selectedDate.getFullYear(),
                );
            });
        </script>
    </body>
</html>
